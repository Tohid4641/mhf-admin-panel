(this.webpackJsonpmla=this.webpackJsonpmla||[]).push([[14],{1092:function(e,t,a){},1111:function(e,t,a){"use strict";a.r(t);var n=a(12),s=a(13),c=a(7),l=a(16),r=a(15),i=a(0),o=a.n(i),m=a(22),u=a(3),d=a.n(u),v=a(25),h=a(823),f=a(824),p=a(837),g=a(829),E=a(830),D=a(831),S=a(832),P=a(822),j=a(825),N=a(826),b=a(11),Y=a(24),M=a.n(Y),C=a(27),x=a(62),y=(a(1092),a(872)),w=(a(881),a(882),a(18)),O=a.n(w),F=a(54),_=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).handleChange=function(e){s.setState({eventFilterStatusSelected:e}),s.props.updatingEventStatusFilter(e),s.getEvents(e.value)},s.getEvents=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object(c.a)(s);t||a.setState({fetchingDetails:!0}),d.a.all([b.a.getEventsProjects("Event",e)]).then((function(e){if(e[0]){var t=e[0].data,n=(t.data?t.data:[]).map((function(e,t){return{id:e._id,details:{index:t,id:e._id,status:e.eventStatus,eventProjectName:e.eventProjectName,eventProjectPlace:e.eventProjectPlace,eventProjectDescription:e.eventProjectDescription&&e.eventProjectDescription.length>250?e.eventProjectDescription.slice(0,250)+"...":e.eventProjectDescription.slice(0,250),date:M()(e.eventProjectDate).format("Do MMM YYYY hh:mm A")?M()(e.eventProjectDate).format("Do MMM YYYY hh:mm A"):""}}}));a.setState({eventsList:n,eventsMain:n})}a.setState({fetchingDetails:!1})})).catch((function(e){console.log(e),e.message&&console.log("An error occurred in change Password")}))},s.getfilterEvents=function(e,t){var a=e?M()(e).format("YYYY-MM-DD"):null,n=t?M()(t).format("YYYY-MM-DD"):null,l=Object(c.a)(s);l.setState({fetchingDetails:!0}),d.a.all([b.a.getfilterEvents("Event",a,n)]).then((function(e){if(e[0]){var t=e[0].data,a=(t.data?t.data:[]).map((function(e,t){return{id:e._id,details:{index:t,id:e._id,status:e.eventStatus,eventProjectName:e.eventProjectName,eventProjectPlace:e.eventProjectPlace,eventProjectDescription:e.eventProjectDescription&&e.eventProjectDescription.length>250?e.eventProjectDescription.slice(0,250)+"...":e.eventProjectDescription.slice(0,250),date:M()(e.eventProjectDate).format("Do MMM YYYY hh:mm A")?M()(e.eventProjectDate).format("Do MMM YYYY hh:mm A"):""}}}));l.setState({eventsList:a,eventsMain:a})}l.setState({fetchingDetails:!1})})).catch((function(e){console.log(e),e.message&&console.log("An error occurred in change Password")}))},s.formatEvent=function(e,t){return o.a.createElement("div",null,o.a.createElement(m.c,{to:s.props.match.path+"/"+e.id,className:"mlac-each"},o.a.createElement("div",{className:"mlace-head"},o.a.createElement("span",null,e.eventProjectName),o.a.createElement("span",{className:"mlacer-date"},e.date),o.a.createElement("span",{className:"mlac-status"},o.a.createElement("i",{className:"fa fa-edit mlac-edit",onClick:function(t){s.updateEvent(t,e)}})),o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-trash mlac-delete",style:{cursor:"pointer"},onClick:function(t){s.toggle(t,e.id)}}))),o.a.createElement("span",{className:"mlace-content",sm:12},e.eventProjectDescription)))},s.deleteEvent=function(){var e=Object(c.a)(s);e.setState({authenticating:!0,msg:!s.state.msg});var t="";s.props.location.pathname.indexOf("events")>-1&&(t="Event"),s.setState({authenticating:!0}),d.a.all([b.a.deleteEvent(s.state.eventid,t)]).then((function(t){if(t[0]){var a=t[0].data;a.status?(e.setState({apiSuccess:"Event deleted successfully "}),setTimeout((function(){return e.setState({modal:!e.state.modal})}),1e3),e.getEvents("",!0)):e.setState({apiError:a.msg})}e.setState({authenticating:!1})})).catch((function(e){console.log(e),e.message&&console.log("An error occurred in change Password")}))},s.toggle=function(e,t){e.preventDefault(),t&&s.setState({eventid:t}),s.setState({modal:!s.state.modal}),console.log(t)},s.updateEvent=function(e,t){e.preventDefault(),s.props.history.push(s.props.match.path+"/update/"+t.id)},s.filterEvents=function(e){var t=s.state.searchText;e&&(t=e.target.value);var a=[];a=t&&t.length>=2?s.state.eventsMain.filter((function(e){return e.details.eventProjectName.toLowerCase().indexOf(t.toLowerCase())>-1||e.details.eventProjectPlace.toLowerCase().indexOf(t.toLowerCase())>-1||e.details.date.toLowerCase().indexOf(t.toLowerCase())>-1})):s.state.eventsMain,s.setState({searchText:t,eventsList:a})},s.filterData=function(e,t){s.getfilterEvents(e,t)},s.state={startDate:null,endDate:null,msg:!0,apiSuccess:"",eventsList:[],eventid:"",modal:!1,eventsMain:[],searchText:"",authenticating:!1,fetchingDetails:!1,eventFilterStatusOptions:[{label:"Pending",value:"Pending"},{label:"In Progress",value:"In Progress"},{label:"Closed",value:"Closed"}],eventFilterStatusSelected:{label:"Pending",value:"Pending"}},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.eventStatusFilter?this.props.eventStatusFilter:this.state.eventFilterStatusSelected;this.setState({eventFilterStatusSelected:e}),this.getEvents(e.value)}},{key:"render",value:function(){var e=this,t=this.props,a=t.eventStatusFilter,n=t.match,s=this.state,c=s.eventsList,l=s.fetchingDetails,r=s.eventFilterStatusSelected,i=a||r;return o.a.createElement("div",{className:"col-span-12 mla-events"},o.a.createElement("div",{className:"col-span-12 xxl:col-span-9"},o.a.createElement("div",{className:"intro-y flex items-end mt-10"},o.a.createElement(m.c,{to:n.path+"/add",className:"ml-auto flex text-theme-1 btn custom-btn"},o.a.createElement(O.a,{content:"add"})))),o.a.createElement(h.a,{className:"intro-y mt-3 mb-3"},o.a.createElement(f.a,{md:8},o.a.createElement("h2",{className:"font-weight-bold"},"Activities & Announcements")),o.a.createElement(f.a,{md:4},o.a.createElement("i",{className:"fa fa-refresh mlac-refresh",onClick:function(){e.getEvents(i.value)}}))),o.a.createElement(p.a,{isOpen:this.state.modal,style:{marginTop:"0px",marginLeft:"0px"}},o.a.createElement(g.a,{style:{backgroundColor:"#253c80",color:"white"},toggle:this.toggle},"Confimation"," "),o.a.createElement(E.a,null,this.state.msg&&o.a.createElement("p",null,"Are you sure you want to delete this Event"),this.state.apiSuccess&&o.a.createElement("div",{className:"errormsg"},o.a.createElement(D.a,{color:"success"},this.state.apiSuccess))),o.a.createElement(S.a,null,this.state.authenticating?o.a.createElement("i",{className:"fa fa-spin fa-refresh authentication-loading"}):o.a.createElement(P.a,{className:" btn btn-primary ",color:"danger",onClick:this.deleteEvent},o.a.createElement("span",{className:"text-white"},"Delete")))),o.a.createElement(h.a,{className:"intro-y"},o.a.createElement(f.a,{sm:!0,md:7}),o.a.createElement(f.a,{sm:!0,md:5,className:"date-filter"},o.a.createElement(y.DateRangePicker,{enableOutsideDays:!0,isOutsideRange:function(){return!1},isDayHighlighted:function(e){return e.isSame(new Date,"d")},startDate:this.state.startDate,startDateId:"your_unique_start_date_id",endDate:this.state.endDate,endDateId:"your_unique_end_date_id",onDatesChange:function(t){var a=t.startDate,n=t.endDate;e.setState({startDate:a,endDate:n}),e.filterData(a,n)},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})}})),l?o.a.createElement(F.a,null):o.a.createElement(f.a,{sm:!0,md:!0,lg:12,className:"mb-30"},o.a.createElement(j.a,{className:"card-statistics h-100"},o.a.createElement(h.a,{className:"mlac-search-container"},o.a.createElement(f.a,{xs:12,sm:12,md:6,lg:8}),o.a.createElement(f.a,{xs:12,sm:12,md:6,lg:4},o.a.createElement("input",{className:"form-control mlac-search",value:this.state.field_search_input,placeholder:"Search",onChange:this.filterEvents,onKeyDown:this.filterEvents,ref:function(t){e.searchInput=t}}))),o.a.createElement(N.a,null,o.a.createElement(v.BootstrapTable,{data:c,pagination:!0,striped:!0,condensed:!0},o.a.createElement(v.TableHeaderColumn,{className:"mlac-row",dataField:"details",dataFormat:this.formatEvent,isKey:!0})))))))}}]),a}(o.a.Component);t.default=Object(C.b)((function(e){return{eventStatusFilter:e.auth.eventStatusFilter}}),(function(e){return{updatingEventStatusFilter:function(t){e(Object(x.i)(t))}}}))(_)}}]);
//# sourceMappingURL=14.e612da5e.chunk.js.map