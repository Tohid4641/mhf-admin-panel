(this.webpackJsonpmla=this.webpackJsonpmla||[]).push([[21],{1107:function(e,t,a){},1123:function(e,t,a){"use strict";a.r(t);var s=a(8),n=a(12),r=a(13),i=a(7),l=a(16),m=a(15),c=a(0),o=a.n(c),d=a(22),u=a(25),p=a(27),h=a(146),b=a.n(h),f=a(823),g=a(824),E=a(825),v=a(826),y=a(147),D=a(11),S=a(3),w=a.n(S),C=a(24),T=a.n(C),N=(a(1107),a(54)),k=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).usersListByMembershipStatus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=Object(i.a)(r);n.setState({fetchingDetails:!0});var l={memberShipStatus:e,skip:t,limit:r.state.limit};a&&""!=a&&(l.search=a),r.membersToken&&r.membersToken.cancel(),r.membersToken=w.a.CancelToken.source(),w.a.all([D.a.usersListByMembershipStatus(r.membersToken.token,l)]).then((function(e){if(e[0]){var a=e[0].data;if(a.status){var r=a.data?a.data:[],i=r.membersCount?r.membersCount:0,l=r.members?r.members:[];l=l.map((function(e,a){return Object(s.a)(Object(s.a)({},e),{},{id:e._id,sNo:t+a+1,statusMember:"Pending"})}));var m=0;0!==i&&0!==t&&(m=parseInt(t/n.state.limit));var c=n.state.pages;c["page_"+m]=l,n.setState({membersList:l,membersCount:i,pages:c,activePage:m}),n.setState({Success_msg:""})}else n.setState({apiError:a})}n.setState({fetchingDetails:!1})})).catch((function(e){console.log(e),e.message&&console.log("An error occurred in change Password")}))},r.renewPlan=function(e,t){return o.a.createElement("div",{className:"mlace-head"},o.a.createElement(d.c,{className:"review-btn btn",to:r.props.match.path+"/renew/"+t.id},"Renew"))},r.uploadFormatter=function(e,t){return o.a.createElement("div",{className:"mlace-head"},t.email&&o.a.createElement(o.a.Fragment,null,o.a.createElement(d.c,{className:"review-btn mr-3 btn",to:r.props.match.path+"/"+t._id},"Details")))},r.formateCreatedOn=function(e,t){return o.a.createElement("div",{className:"mlace-head"},t.createdAt&&o.a.createElement("span",null,0===T()(new Date).diff(T()(t.createdAt),"days")?"Today":1===T()(new Date).diff(T()(t.createdAt),"days")?T()(new Date).diff(T()(t.createdAt),"day")+" Day":T()(new Date).diff(T()(t.createdAt),"day")+" Days"))},r.formateExpiredOn=function(e,t){return o.a.createElement("div",{className:"mlace-head"},t.expiryDate&&o.a.createElement("span",null,0===T()(T()(t.expiryDate)).diff(new Date,"days")?"Today":1===T()(T()(t.expiryDate)).diff(new Date,"days")?T()(T()(t.expiryDate)).diff(new Date,"day")+" Day":T()(T()(t.expiryDate)).diff(new Date,"day")+" Days"))},r.updateContact=function(e,t){return o.a.createElement(d.c,{to:r.props.match.path+"/update/"+e.id},t)},r.formatName=function(e,t){return o.a.createElement(d.c,{to:r.props.match.path+"/card/"+t._id},e)},r.displayDate=function(e,t){return o.a.createElement("p",null,e?T()(e).format("DD/MM/YYYY"):"")},r.onStatusSelected=function(e){r.setState({selectedStatus:e,skip:0},(function(){r.usersListByMembershipStatus(e.value,0,r.state.searchTerm)}))},r.paginationClicked=function(e){console.log(e),r.state.pages&&r.state.pages["page_"+(e-1)]?(console.log(r.state.pages),r.setState({membersList:r.state.pages["page_"+(e-1)],activePage:e-1})):(r.setState({skip:r.state.limit*(e-1)}),r.usersListByMembershipStatus(r.state.selectedStatus.value,r.state.limit*(e-1),r.state.searchTerm))},r.searchMember=function(e){console.log(e),r.setState({skip:0,searchTerm:e},(function(){r.usersListByMembershipStatus(r.state.selectedStatus.value,0,e)}))},r.state={membersList:[],fetchingDetails:!1,msg:!0,apiSuccess:"",modal:!1,memberId:"",authenticating:!1,selectedStatus:{label:"Approved",value:"Approved"},skip:0,limit:30,pages:{},membersCount:0,activePage:0,searchTerm:"",exporting:!1},r.membersToken=null,r.toggle=r.toggle.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.usersListByMembershipStatus("Renewal")}},{key:"toggle",value:function(e){e&&this.setState({memberId:e}),this.setState({modal:!this.state.modal})}},{key:"render",value:function(){var e=this,t=(this.props.match,this.state),a=t.fetchingDetails,s=t.membersList;return o.a.createElement("div",{className:"col-span-12 membership"},o.a.createElement("div",{className:"intro-y col-span-12"},o.a.createElement("div",{className:"intro-y flex items-end mt-10 mb-10"},o.a.createElement("h2",{className:"text-lg text-black font-medium"},"Renewal Requests"),o.a.createElement("div",{className:"membership-search-box"},o.a.createElement(y.DebounceInput,{placeholder:"Search",minLength:3,debounceTimeout:300,onChange:function(t){e.searchMember(t.target.value)}}))),o.a.createElement(f.a,{className:"intro-y"},o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{sm:!0,md:!0,lg:12,className:"mb-30"},o.a.createElement(E.a,{className:"card-statistics h-100"},o.a.createElement(v.a,null,o.a.createElement(u.BootstrapTable,{data:s,striped:!0,condensed:!0},o.a.createElement(u.TableHeaderColumn,{width:"40",dataField:"sNo",isKey:!0}," ","SNo"),o.a.createElement(u.TableHeaderColumn,{width:"100",dataField:"name",dataFormat:this.formatName}," ","Name"),o.a.createElement(u.TableHeaderColumn,{width:"120",dataField:"email"}," ","Email"),o.a.createElement(u.TableHeaderColumn,{width:"100",dataField:"mobileNo"}," ","Mobile Number"),o.a.createElement(u.TableHeaderColumn,{width:"80",dataField:"maritalStatus"}," ","Marital Status"),o.a.createElement(u.TableHeaderColumn,{width:"100",dataField:"createdAt",dataFormat:this.displayDate}," ","Created At"),o.a.createElement(u.TableHeaderColumn,{width:"120",dataField:"expiryDate",dataFormat:this.displayDate},"Expiry Date"),o.a.createElement(u.TableHeaderColumn,{width:"120",dataFormat:this.formateExpiredOn},"Expired On"),o.a.createElement(u.TableHeaderColumn,{width:"120",dataFormat:this.uploadFormatter},"Actions"))))),o.a.createElement(b.a,{activePage:this.state.activePage+1,itemsCountPerPage:this.state.limit,totalItemsCount:this.state.membersCount,pageRangeDisplayed:10,itemClass:"page-item",linkClass:"page-link",onChange:this.paginationClicked,firstPageText:"First",prevPageText:"Prev",nextPageText:"Next",lastPageText:"Last"})),a&&o.a.createElement(N.a,null))))}}]),a}(o.a.Component);t.default=Object(p.b)((function(e){return{config:e.auth.config}}),(function(e){return{}}))(k)}}]);
//# sourceMappingURL=21.16c9946c.chunk.js.map