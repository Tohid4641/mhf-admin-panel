(this.webpackJsonpmla=this.webpackJsonpmla||[]).push([[17],{1101:function(e,t,a){},1124:function(e,t,a){"use strict";a.r(t);var n=a(19),i=a(12),r=a(13),s=a(7),o=a(16),l=a(15),c=a(0),m=a.n(c),d=(a(1101),a(2)),u=a(21),p=a(1),f=a.n(p),h=a(17),v=a.n(h),b=a(9),g=["className","cssModule","fluid","tag"],E={tag:b.n,fluid:f.a.oneOfType([f.a.bool,f.a.string]),className:f.a.string,cssModule:f.a.object},y=function(e){var t=e.className,a=e.cssModule,n=e.fluid,i=e.tag,r=Object(u.a)(e,g),s="container";!0===n?s="container-fluid":n&&(s="container-"+n);var o=Object(b.j)(v()(t,s),a);return m.a.createElement(i,Object(d.a)({},r,{className:o}))};y.propTypes=E,y.defaultProps={tag:"div"};var N=y,S=a(824),_=a(825),O=a(826),x=a(827),j=a(822),A=a(831),w=a(51),k=a.n(w),T=a(20),V=a.n(T),C=a(53),P=a(3),z=a.n(P),D=a(27),M=a(11),R=a(82),F=a(62),J=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).updateValidators=function(e,t){r.validators[e].errors=[],r.validators[e].state=t,r.validators[e].valid=!0,r.validators[e].rules.forEach((function(a){a.test instanceof RegExp?a.test.test(t)||(r.validators[e].errors.push(a.message),r.validators[e].valid=!1):"function"===typeof a.test&&(a.test(t)||(r.validators[e].errors.push(a.message),r.validators[e].valid=!1))}))},r.isFormValid=function(){var e=!0;return Object.keys(r.validators).forEach((function(t){"mobile_no"===t&&(r.validators[t].valid||(e=!1))})),e},r.isFormValid_varification=function(){var e=!0;return Object.keys(r.validators).forEach((function(t){"otp"===t&&(r.validators[t].valid||(e=!1))})),e},r.displayValidationErrors=function(e){var t=r.validators[e];if(t&&!t.valid){var a=t.errors.map((function(e,t){return m.a.createElement("span",{className:"error",key:t},"* ",e,m.a.createElement("br",null))}));return m.a.createElement("div",{className:"col s12 row"},a)}return""},r.onChange=function(e){r.setState(Object(n.a)({},e.target.name,e.target.value)),r.updateValidators([e.target.name],e.target.value)},r.Admin_send_otp=function(e){var t=r.state.mobile_no,a=Object(s.a)(r);e&&"resend"===e&&r.setState({authenticating_resend:!0}),z.a.all([M.a.Admin_send_otp(t)]).then((function(t){if(t[0]){var n=t[0].data;n.status?a.setState({sendotp:!1,otp_verification:!0}):a.setState({Errormsg:n.message})}a.setState({authenticating:!1}),e&&"resend"===e&&a.setState({authenticating_resend:!1})})).catch((function(e){console.log(e),e.message&&console.log("An error occurred in Admin_send_otp")}))},r.AdminOtp_verification=function(e){e.preventDefault(),r.setState({authenticating:!0});var t=r.state,a=t.mobile_no,n=t.otp,i=Object(s.a)(r);z.a.all([M.a.AdminOtp_verification(a,n)]).then((function(e){if(e[0]){var t=e[0].data;if(t.status){var a=t.data,n=R.a;R.e(n,JSON.stringify(a)),i.props.updatingAuthenticate({token:a.token,mobileNo:a.mobileNo,profile:a}),i.props.history.push("home")}else i.setState({Errormsg:"Enter Correct OTP"})}i.setState({authenticating:!1})})).catch((function(e){console.log(e),e.message&&console.log("An error occurred in AdminOtp_verification")}))},r.handleSubmit=r.handleSubmit.bind(Object(s.a)(r)),r.state={email:"",password:"",otp:"",Errormsg:"",mobile_no:"",mobileData:"",sendotp:!0,otp_verification:!1,authenticating:!1,authenticating_resend:!1,validateSession:!1},r.validators=C.a,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=R.a,t=R.d(e);t&&""!==t?(t=JSON.parse(t),this.props.updatingAuthenticate({token:t.token,mobileNo:t.mobileNo,profile:t}),this.props.history.push("home")):this.setState({validateSession:!0})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({authenticating:!0}),this.Admin_send_otp()}},{key:"render",value:function(){var e=this,t=this.state,a=t.Errormsg,n=t.authenticating,i=t.authenticating_resend,r=t.sendotp,s=t.otp_verification,o=t.validateSession;return m.a.createElement("div",{className:"col-span-12 mla-login",style:{flex:"1 1"}},m.a.createElement("div",{className:"col-span-12 xxl:col-span-9"},m.a.createElement(N,null,m.a.createElement(S.a,{md:4,className:"mx-auto",style:{padding:"65px 0"}},m.a.createElement(_.a,{className:" card-statistics mb-30",style:{borderRadius:"0rem !important",boxShadow:"0px 8px 36px #222"}},m.a.createElement(O.a,null,m.a.createElement("div",{className:"mx-auto mla-logo-cont",style:{textAlign:"center"}},m.a.createElement("span",{className:"mhf-text"},"MHF")),r&&o&&m.a.createElement("div",{className:"sendotp"},m.a.createElement("div",null,m.a.createElement("h2",{className:"font-weight-bold",style:{fontSize:"22px"}}," ","Sign In")),m.a.createElement("br",null),m.a.createElement(k.a,{onSubmit:this.handleSubmit},m.a.createElement(x.a,null,m.a.createElement(V.a,{type:"text",name:"mobile_no",className:"form-control",onChange:this.onChange,value:this.state.mobile_no,placeholder:"Enter Mobile Number"}),this.displayValidationErrors("mobile_no")),m.a.createElement("h2",{className:"font-weight-bold",style:{fontSize:"12px",textAlign:"center"}}," ","We Will Send One Time Password ( OTP ) to your mobile number"),n?m.a.createElement("i",{className:"fa fa-spin fa-refresh authentication-loading"}):m.a.createElement(j.a,{className:" btn btn-primary mt-3",style:{padding:"0.375rem 1.75rem",borderRadius:"1.25rem"},color:"primary",type:"submit",disabled:!this.isFormValid()},m.a.createElement("span",{className:"text-white"},"Send OTP")))),s&&m.a.createElement("div",{className:"otp-verification"},m.a.createElement("div",null,m.a.createElement("h2",{className:"font-weight-bold",style:{marginBottom:"5px",fontSize:"22px"}}," ","OTP Verification")),m.a.createElement("h2",{className:"font-weight-bold",style:{fontSize:"12px"}},"Enter the OTP you Received to"),this.state.mobileData&&m.a.createElement("h2",{className:"font-weight-bold",style:{fontSize:"12px",paddingTop:"4px"}},"+91-",this.state.mobileData),m.a.createElement("br",null),a&&m.a.createElement("div",{className:"errormsg"},m.a.createElement(A.a,{color:"danger"},a)),m.a.createElement(k.a,{onSubmit:this.AdminOtp_verification},m.a.createElement(x.a,null,m.a.createElement(V.a,{type:"password",className:"form-control",name:"otp",onChange:this.onChange,value:this.state.otp,placeholder:"Enter OTP"}),this.displayValidationErrors("otp")),m.a.createElement("h2",{className:"font-weight-bold",style:{fontSize:"12px",textAlign:"center"}},"If you didn't receive a code !\xa0",i?m.a.createElement("i",{className:"fa fa-spin fa-refresh authentication-loading"}):m.a.createElement("span",{style:{cursor:"pointer",color:"#007bff"},onClick:function(){e.Admin_send_otp("resend")}},"Resend")),n?m.a.createElement("i",{className:"fa fa-spin fa-refresh authentication-loading"}):m.a.createElement(j.a,{className:" btn btn-primary mt-3",style:{padding:"0.375rem 1.75rem",borderRadius:"1.25rem"},color:"primary",type:"submit",disabled:!this.isFormValid_varification()},m.a.createElement("span",{className:"text-white"},"Sign In"))))))))))}}]),a}(m.a.Component);t.default=Object(D.b)((function(e){return{config:e.auth.config}}),(function(e){return{updatingAuthenticate:function(t){e(Object(F.e)(t))}}}))(J)}}]);
//# sourceMappingURL=17.9ef6408d.chunk.js.map