(this.webpackJsonpmla=this.webpackJsonpmla||[]).push([[12],{1100:function(t,e,a){},1119:function(t,e,a){"use strict";a.r(e);var n=a(19),r=a(12),s=a(13),i=a(7),o=a(16),l=a(15),c=a(0),m=a.n(c),d=a(823),p=a(824),u=a(825),h=a(826),f=a(827),v=a(828),g=a(822),b=a(3),E=a.n(b),N=a(20),D=a.n(N),y=a(51),S=a.n(y),O=a(11),j=a(53),k=a(18),x=a.n(k),w=(a(1100),function(t){Object(o.a)(a,t);var e=Object(l.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).updateValidators=function(t,e){s.validators[t].errors=[],s.validators[t].state=e,s.validators[t].valid=!0,s.validators[t].rules.forEach((function(a){a.test instanceof RegExp?a.test.test(e)||(s.validators[t].errors.push(a.message),s.validators[t].valid=!1):"function"===typeof a.test&&(a.test(e)||(s.validators[t].errors.push(a.message),s.validators[t].valid=!1))}))},s.isFormValid=function(){var t=!0;return Object.keys(s.validators).forEach((function(e){"departmentName"===e&&(s.validators[e].valid||(t=!1))})),t},s.displayValidationErrors=function(t){var e=s.validators[t];if(e&&!e.valid){var a=e.errors.map((function(t,e){return m.a.createElement("span",{className:"error",key:e},"* ",t,m.a.createElement("br",null))}));return m.a.createElement("div",{className:"col s12 row"},a)}return""},s.onChange=function(t){s.setState(Object(n.a)({},t.target.name,t.target.value)),s.updateValidators([t.target.name],t.target.value)},s.insertDepartment=function(){s.setState({authenticating:!0});var t=s.state.departmentName,e=Object(i.a)(s);E.a.all([O.a.insertDepartment(t)]).then((function(t){if(t[0]){var a=t[0].data;a.status?e.props.history.push("/departments"):e.setState({apiError:a.msg})}e.setState({authenticating:!1})})).catch((function(t){console.log(t),t.message&&console.log("An error occurred in change Password")}))},s.getDepartment=function(){var t=Object(i.a)(s);E.a.all([O.a.getDepartment(s.props.match.params.department_id)]).then((function(e){if(e[0]){var a=e[0].data;if(console.log(a),a.status){var n=a.data,r=n.departmentName,s={departmentName:r};Object.keys(s).map((function(e){return t.updateValidators([e],s[e]),!0})),t.setState({departmentName:r}),console.log("updated"),t.setState({departmentDetails:n}),t.setState({Success_msg:""})}else t.setState({apiError:a})}})).catch((function(t){console.log(t),t.message&&console.log("An error occurred in change Password")}))},s.updateDepartment=function(){var t=s.state.departmentName,e=Object(i.a)(s),a=s.props.match.params.department_id;s.setState({authenticating:!0}),E.a.all([O.a.updateDepartment(t,a)]).then((function(t){if(t[0]){var a=t[0].data;a.status?e.props.history.push("/departments"):e.setState({apiError:a.msg})}e.setState({authenticating:!1})})).catch((function(t){console.log(t),t.message&&console.log("An error occurred in Departments")}))},s.tabround=s.tabround.bind(Object(i.a)(s)),s.onChange=s.onChange.bind(Object(i.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(i.a)(s)),s.state={departmentName:"",data:"",apiError:"",authenticating:!1,updateDepartment:!1,departmentDetails:{},departmentname:""},s.validators=j.a,s}return Object(s.a)(a,[{key:"tabround",value:function(t){this.state.tabround!==t&&this.setState({tabround:t})}},{key:"componentDidMount",value:function(){this.props.location.pathname.indexOf("update")>-1&&(this.setState({updateDepartment:!0}),this.getDepartment(this.props.match.params.department_id))}},{key:"handleSubmit",value:function(t){t.preventDefault();this.state.updateDepartment?this.updateDepartment():this.insertDepartment()}},{key:"render",value:function(){console.log(this.state.departmentDetails);var t=this.state.authenticating;return m.a.createElement("div",{className:"col-span-12 mla-departments-form"},m.a.createElement("div",{className:"grid grid-cols-12 gap-6 mt-8"},m.a.createElement("div",{className:"intro-y col-span-12 lg:col-span-6"},m.a.createElement("div",{className:"intro-y"},m.a.createElement("div",{className:"flex flex-col sm:flex-row items-center p-4 border-b border-gray-200"},m.a.createElement("h1",{className:"font-medium text-base mr-auto"},m.a.createElement(x.a,{content:"departments form"}))),m.a.createElement(d.a,null,m.a.createElement(p.a,{md:12},m.a.createElement(u.a,{className:" card-statistics"},m.a.createElement(h.a,null,m.a.createElement(S.a,{onSubmit:this.handleSubmit},m.a.createElement(f.a,{className:"section-field"},m.a.createElement(v.a,null," ",m.a.createElement(x.a,{content:"department name"})," "),m.a.createElement(D.a,{placeholder:"Department Name",type:"text",name:"departmentName",value:this.state.departmentDetails.departmentName,onChange:this.onChange,className:"form-control"}),this.displayValidationErrors("departmentName")),m.a.createElement(f.a,null,t?m.a.createElement("i",{className:"fa fa-spin fa-refresh authentication-loading"}):m.a.createElement(g.a,{className:" btn btn-primary mt-3",color:"primary",type:"submit",disabled:!this.isFormValid()},this.state.updateDepartment?m.a.createElement("span",{className:"text-white"}," ",m.a.createElement(x.a,{content:"update"})," "):m.a.createElement("span",{className:"text-white"}," ",m.a.createElement(x.a,{content:"submit"})," "))))))))))))}}]),a}(m.a.Component));e.default=w}}]);
//# sourceMappingURL=12.686d78ee.chunk.js.map