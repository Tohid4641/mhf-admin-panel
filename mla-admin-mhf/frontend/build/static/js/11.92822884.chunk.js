(this.webpackJsonpmla=this.webpackJsonpmla||[]).push([[11],{1099:function(e,t,a){},1118:function(e,t,a){"use strict";a.r(t);var n=a(12),s=a(13),c=a(7),l=a(16),r=a(15),m=a(0),i=a.n(m),o=a(3),d=a.n(o),u=a(22),p=a(25),h=a(837),g=a(829),f=a(830),E=a(831),N=a(832),b=a(822),v=a(823),S=a(824),y=a(825),D=a(826),w=(a(1099),a(11)),x=a(18),k=a.n(x),C=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).getDepartments=function(){var e=Object(c.a)(s);e.setState({fetchingDetails:!0}),d.a.all([w.a.getDepartments()]).then((function(t){if(t[0]){var a=t[0].data;if(a.status){if(a.data){var n=a.data.map((function(e,t){return{sNo:t,id:e._id,departmentName:e.departmentName}}));e.setState({departmentList:n,departmentsMain:n})}e.setState({fetchingDetails:!1})}else e.setState({apiError:a})}})).catch((function(e){console.log(e),e.message&&console.log("An error occurred in change Password")}))},s.deleteDepartment=function(){var e=Object(c.a)(s);e.setState({authenticating:!0,msg:!s.state.msg}),s.setState({authenticating:!0}),d.a.all([w.a.deleteDepartment(s.state.departmentId)]).then((function(t){if(t[0]){var a=t[0].data;a.status?(e.setState({apiSuccess:"Department deleted successfully "}),setTimeout((function(){return window.location.reload()}),2e3)):e.setState({apiError:a.msg})}e.setState({authenticating:!1})})).catch((function(e){console.log(e),e.message&&console.log("An error occurred in departments")}))},s.uploadFormatter=function(e,t){return i.a.createElement("div",{className:"mlace-head"},i.a.createElement(u.c,{to:s.props.match.path+"/update/"+t.id,className:"mlac-each"},i.a.createElement("i",{className:"fa fa-edit mlac-edit"})),i.a.createElement("i",{className:"fa fa-trash mlac-delete ml-2",style:{cursor:"pointer"},onClick:function(){s.toggle(t.id)}}))},s.state={departmentList:[],departmentsMain:[],fetchingDetails:!1,msg:!0,apiSuccess:"",modal:!1,departmentId:"",authenticating:!1},s.toggle=s.toggle.bind(Object(c.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDepartments()}},{key:"toggle",value:function(e){e&&this.setState({departmentId:e}),this.setState({modal:!this.state.modal})}},{key:"render",value:function(){var e=this.props.match,t=this.state,a=t.departmentList,n=t.fetchingDetails,s=t.authenticating,c=t.apiSuccess;return i.a.createElement("div",{className:"col-span-12 mla-department"},i.a.createElement("div",{className:"col-span-12 xxl:col-span-9"},i.a.createElement("div",{className:"intro-y flex items-end mt-10"},i.a.createElement("h2",{className:"text-lg text-black font-medium"},i.a.createElement(k.a,{content:"departments"})),i.a.createElement(u.c,{to:e.path+"/add",className:"ml-auto flex text-theme-1"},i.a.createElement(k.a,{content:"add"}))),i.a.createElement(h.a,{isOpen:this.state.modal,style:{marginTop:"0px",marginLeft:"0px"}},i.a.createElement(g.a,{style:{backgroundColor:"#253c80",color:"white"},toggle:this.toggle},"Confimation"," "),i.a.createElement(f.a,null,this.state.msg&&i.a.createElement("p",null,"A"," ",i.a.createElement(k.a,{content:"are you sure you want to delete this department"})),c&&i.a.createElement("div",{className:"errormsg"},i.a.createElement(E.a,{color:"success"},c))),i.a.createElement(N.a,null,s?i.a.createElement("i",{className:"fa fa-spin fa-refresh authentication-loading"}):i.a.createElement(b.a,{className:" btn btn-primary ",color:"danger",onClick:this.deleteDepartment},i.a.createElement("span",{className:"text-white"}," ",i.a.createElement(k.a,{content:"delete"})))))),i.a.createElement(v.a,{className:"intro-y"},n?i.a.createElement("i",{className:"fa fa-spin fa-refresh initial_loading"}):i.a.createElement(S.a,{sm:!0,md:!0,lg:12,className:"mb-30"},i.a.createElement(y.a,{className:"card-statistics h-100"},i.a.createElement(D.a,null,i.a.createElement(p.BootstrapTable,{data:a,pagination:!0,striped:!0,condensed:!0,search:!0},i.a.createElement(p.TableHeaderColumn,{width:"100",dataField:"sNo",isKey:!0},i.a.createElement(k.a,{content:"sNo"})),i.a.createElement(p.TableHeaderColumn,{width:"100",dataField:"departmentName"},i.a.createElement(k.a,{content:"department name"})),i.a.createElement(p.TableHeaderColumn,{width:"50",dataFormat:this.uploadFormatter},i.a.createElement(k.a,{content:"update"}))))))))}}]),a}(i.a.Component);t.default=C}}]);
//# sourceMappingURL=11.92822884.chunk.js.map