(this.webpackJsonpmla=this.webpackJsonpmla||[]).push([[7],{1104:function(e,t,a){},1120:function(e,t,a){"use strict";a.r(t);var l=a(12),s=a(13),n=a(7),c=a(16),i=a(15),m=a(0),r=a.n(m),o=a(22),u=a(3),d=a.n(u),h=a(25),f=a(837),b=a(829),g=a(830),p=a(831),E=a(832),v=a(822),N=a(823),S=a(824),A=a(825),x=a(826),y=a(11),w=a(27),F=a(62),O=a(18),T=a.n(O),C=(a(1104),function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).getAlbums=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.a)(s);e||t.setState({fetchingDetails:!0}),d.a.all([y.a.getAlbums()]).then((function(e){if(e[0]){var a=e[0].data,l=(a.data?a.data:[]).map((function(e,t){var a=e.albumFiles?e.albumFiles.replace(/quot;/g,'"'):"";return{id:e._id,details:{index:t,id:e._id,albumTitle:e.albumTitle,albumFiles:JSON.parse(a),albumDate:e.createdAt}}}));t.setState({albumsList:l,albumsMain:l})}t.setState({fetchingDetails:!1})})).catch((function(e){console.log(e),e.message&&console.log("An error occurred in change Password")}))},s.formatAlbum=function(e,t){return r.a.createElement(o.c,{to:s.props.match.path+"/"+e.id,className:"mlac-each"},r.a.createElement("div",{className:"mlace-head"},r.a.createElement("span",null,e.albumTitle),r.a.createElement("span",{className:"mlac-status"},r.a.createElement("i",{className:"fa fa-edit mlac-edit",onClick:function(t){s.updateAlbum(t,e)}}),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-trash mlac-delete",style:{cursor:"pointer"},onClick:function(t){s.toggle(t,e.id)}})))),r.a.createElement("div",{className:"mlace-content",sm:12},e.albumFiles&&e.albumFiles.images&&e.albumFiles.images.length>0&&e.albumFiles.images.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("img",{src:s.props.config.s3BasicPath+e,alt:"porfile"}))}))))},s.deleteAlbum=function(){var e=Object(n.a)(s);e.setState({authenticating:!0,msg:!s.state.msg}),s.setState({authenticating:!0}),d.a.all([y.a.deleteAlbum(s.state.albumtid)]).then((function(t){if(t[0]){var a=t[0].data;a.status?(e.setState({apiSuccess:"Album deleted successfully "}),setTimeout((function(){return e.setState({modal:!e.state.modal})}),1e3),e.getAlbums(!0)):e.setState({apiError:a.msg})}e.setState({authenticating:!1})})).catch((function(e){console.log(e),e.message&&console.log("An error occurred in change Password")}))},s.toggle=function(e,t){e.preventDefault(),t&&s.setState({albumtid:t}),s.setState({modal:!s.state.modal}),console.log(t)},s.updateAlbum=function(e,t){e.preventDefault(),s.props.history.push(s.props.match.path+"/update/"+t.id)},s.filterAlbums=function(e){var t=s.state.searchText;e&&(t=e.target.value);var a=[];a=t&&t.length>=2?s.state.albumsMain.filter((function(e){return e.details.albumTitle.toLowerCase().indexOf(t.toLowerCase())>-1})):s.state.albumsMain,s.setState({searchText:t,albumsList:a})},s.state={albumsList:[],albumsMain:[],searchText:"",fetchingDetails:!1,msg:!0,apiSuccess:"",albumtid:"",modal:!1},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getAlbums()}},{key:"render",value:function(){var e=this,t=this.props.match,a=this.state,l=a.albumsList,s=a.fetchingDetails;return r.a.createElement("div",{className:"col-span-12 mlac-album"},r.a.createElement("div",{className:"col-span-12 xxl:col-span-9"},r.a.createElement("div",{className:"intro-y flex items-end mt-10"},r.a.createElement(o.c,{to:t.path+"/add",className:"ml-auto flex text-theme-1"},r.a.createElement(T.a,{content:"add"})))),r.a.createElement(f.a,{isOpen:this.state.modal,style:{marginTop:"0px",marginLeft:"0px"}},r.a.createElement(b.a,{style:{backgroundColor:"#253c80",color:"white"},toggle:this.toggle},"Confimation"," "),r.a.createElement(g.a,null,this.state.msg&&r.a.createElement("p",null,"Are you sure you want to delete this Album"),this.state.apiSuccess&&r.a.createElement("div",{className:"errormsg"},r.a.createElement(p.a,{color:"success"},this.state.apiSuccess))),r.a.createElement(E.a,null,this.state.authenticating?r.a.createElement("i",{className:"fa fa-spin fa-refresh authentication-loading"}):r.a.createElement(v.a,{className:" btn btn-primary ",color:"danger",onClick:this.deleteAlbum},r.a.createElement("span",{className:"text-white"},"Delete")))),r.a.createElement(N.a,{className:"intro-y mt-3 mb-3"},r.a.createElement(S.a,{md:8},r.a.createElement("h2",{className:"font-weight-bold"},r.a.createElement(T.a,{content:"albums"})," ")),r.a.createElement(S.a,{md:4})),r.a.createElement(N.a,{className:"intro-y"},s?r.a.createElement("i",{className:"fa fa-spin fa-refresh initial_loading"}):r.a.createElement(S.a,{sm:!0,md:!0,lg:12,className:"mb-30"},r.a.createElement(A.a,{className:"card-statistics h-100"},r.a.createElement(N.a,{className:"mlac-search-container"},r.a.createElement(S.a,{xs:12,sm:12,md:6,lg:8}),r.a.createElement(S.a,{xs:12,sm:12,md:6,lg:4},r.a.createElement("input",{className:"form-control mlac-search",value:this.state.field_search_input,placeholder:"Search",onChange:this.filterAlbums,onKeyDown:this.filterAlbums,ref:function(t){e.searchInput=t}}))),r.a.createElement(x.a,null,r.a.createElement(h.BootstrapTable,{data:l,pagination:!0,striped:!0,condensed:!0},r.a.createElement(h.TableHeaderColumn,{className:"mlac-row",dataField:"details",dataFormat:this.formatAlbum,isKey:!0})))))))}}]),a}(r.a.Component));t.default=Object(w.b)((function(e){return{eventStatusFilter:e.auth.eventStatusFilter,config:e.auth.config}}),(function(e){return{updatingEventStatusFilter:function(t){e(Object(F.i)(t))}}}))(C)}}]);
//# sourceMappingURL=7.c63bf432.chunk.js.map