{"version":3,"sources":["components/containers/departments/departments.js"],"names":["Events","props","getDepartments","thisView","setState","fetchingDetails","axios","all","adminService","then","res","resData","data","status","departmentList","map","eachDepartment","index","sNo","id","_id","departmentName","departmentsMain","apiError","catch","console","log","message","deleteDepartment","authenticating","msg","state","departmentId","apiSuccess","setTimeout","window","location","reload","uploadFormatter","cell","row","className","to","match","path","style","cursor","onClick","toggle","modal","bind","this","content","isOpen","marginTop","marginLeft","backgroundColor","color","sm","md","lg","pagination","striped","condensed","search","width","dataField","isKey","dataFormat","React","Component"],"mappings":"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","file":"static/js/11.92822884.chunk.js","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { NavLink } from 'react-router-dom'\nimport { BootstrapTable, TableHeaderColumn } from 'react-bootstrap-table'\nimport {\n  Row,\n  Col,\n  Card,\n  CardBody,\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Alert\n} from 'reactstrap'\nimport './departments.scss'\n\nimport adminService from '../../services/adminService'\n\nimport Translate from 'react-translate-component'\n\nclass Events extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      departmentList: [],\n      departmentsMain: [],\n      fetchingDetails: false,\n      msg: true,\n      apiSuccess: '',\n      modal: false,\n      departmentId: '',\n      authenticating: false\n    }\n    this.toggle = this.toggle.bind(this)\n  }\n\n  componentDidMount () {\n    this.getDepartments()\n  }\n\n  getDepartments = () => {\n    var thisView = this\n    thisView.setState({ fetchingDetails: true })\n    axios\n      .all([adminService.getDepartments()])\n      .then(function (res) {\n        if (res[0]) {\n          let resData = res[0].data\n          if (resData.status) {\n            if (resData.data) {\n              let departmentList = resData.data.map((eachDepartment, index) => {\n                return {\n                  sNo: index,\n                  id: eachDepartment._id,\n                  departmentName: eachDepartment.departmentName\n                }\n              })\n              thisView.setState({\n                departmentList,\n                departmentsMain: departmentList\n              })\n            }\n            thisView.setState({ fetchingDetails: false })\n          } else {\n            thisView.setState({ apiError: resData })\n          }\n        }\n      })\n      .catch(function (res) {\n        console.log(res)\n        if (res.message) console.log('An error occurred in change Password')\n      })\n  }\n\n  deleteDepartment = () => {\n    var thisView = this\n    thisView.setState({ authenticating: true, msg: !this.state.msg })\n\n    this.setState({ authenticating: true })\n    axios\n      .all([adminService.deleteDepartment(this.state.departmentId)])\n      .then(function (res) {\n        if (res[0]) {\n          let resData = res[0].data\n          if (resData.status) {\n            thisView.setState({\n              apiSuccess: 'Department deleted successfully '\n            })\n\n            setTimeout(() => window.location.reload(), 2000)\n          } else {\n            thisView.setState({ apiError: resData.msg })\n          }\n        }\n        thisView.setState({ authenticating: false })\n      })\n      .catch(function (res) {\n        console.log(res)\n        if (res.message) console.log('An error occurred in departments')\n      })\n  }\n\n  uploadFormatter = (cell, row) => {\n    return (\n      <div className='mlace-head'>\n        <NavLink\n          to={this.props.match.path + '/update/' + row.id}\n          className='mlac-each'\n        >\n          <i className='fa fa-edit mlac-edit' />\n        </NavLink>\n\n        <i\n          className='fa fa-trash mlac-delete ml-2'\n          style={{ cursor: 'pointer' }}\n          onClick={() => {\n            this.toggle(row.id)\n          }}\n        />\n      </div>\n    )\n  }\n\n  toggle (id) {\n    if (id) {\n      this.setState({ departmentId: id })\n    }\n    this.setState({\n      modal: !this.state.modal\n    })\n  }\n\n  render () {\n    const { match } = this.props\n    const {\n      departmentList,\n      fetchingDetails,\n      authenticating,\n      apiSuccess\n    } = this.state\n\n    return (\n      <div className='col-span-12 mla-department'>\n        <div className='col-span-12 xxl:col-span-9'>\n          <div className='intro-y flex items-end mt-10'>\n            <h2 className='text-lg text-black font-medium'>\n              <Translate content='departments' />\n            </h2>\n            <NavLink\n              to={match.path + '/add'}\n              className='ml-auto flex text-theme-1'\n            >\n              <Translate content='add' />\n            </NavLink>\n          </div>\n          <Modal\n            isOpen={this.state.modal}\n            style={{ marginTop: '0px', marginLeft: '0px' }}\n          >\n            <ModalHeader\n              style={{ backgroundColor: '#253c80', color: 'white' }}\n              toggle={this.toggle}\n            >\n              Confimation{' '}\n            </ModalHeader>\n            <ModalBody>\n              {this.state.msg && (\n                <p>\n                  A{' '}\n                  <Translate content='are you sure you want to delete this department' />\n                </p>\n              )}\n              {apiSuccess && (\n                <div className='errormsg'>\n                  <Alert color='success'>{apiSuccess}</Alert>\n                </div>\n              )}\n            </ModalBody>\n            <ModalFooter>\n              {!authenticating ? (\n                <Button\n                  className=' btn btn-primary '\n                  color='danger'\n                  onClick={this.deleteDepartment}\n                >\n                  <span className='text-white'>\n                    {' '}\n                    <Translate content='delete' />\n                  </span>\n                </Button>\n              ) : (\n                <i className='fa fa-spin fa-refresh authentication-loading' />\n              )}\n            </ModalFooter>\n          </Modal>\n        </div>\n\n        <Row className={'intro-y'}>\n          {!fetchingDetails ? (\n            <Col sm md lg={12} className='mb-30'>\n              <Card className='card-statistics h-100'>\n                <CardBody>\n                  <BootstrapTable\n                    data={departmentList}\n                    pagination\n                    striped\n                    condensed\n                    search\n                  >\n                    <TableHeaderColumn width='100' dataField='sNo' isKey>\n                      <Translate content='sNo' />\n                    </TableHeaderColumn>\n                    <TableHeaderColumn width='100' dataField='departmentName'>\n                      <Translate content='department name' />\n                    </TableHeaderColumn>\n                    <TableHeaderColumn\n                      width='50'\n                      dataFormat={this.uploadFormatter}\n                    >\n                      <Translate content='update' />\n                    </TableHeaderColumn>\n                  </BootstrapTable>\n                </CardBody>\n              </Card>\n            </Col>\n          ) : (\n            <i className='fa fa-spin fa-refresh initial_loading' />\n          )}\n        </Row>\n      </div>\n    )\n  }\n}\nexport default Events\n"],"sourceRoot":""}